function getError(e,n){var t="cannot post "+e.action+" "+n.status+"'",o=new Error(t);return o.status=n.status,o.method="post",o.url=e.action,o}function getBody(e){var n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch(e){return n}}function generateMixed(e){for(var n="",t=0;t<e;t++){var o=Math.ceil(61*Math.random());n+=jschars[o]}return n}window.Store=function(e){this.name=e;var n=localStorage.getItem(this.name);this.data=n&&JSON.parse(n)||{}},_.extend(Store.prototype,{save:function(){localStorage.setItem(this.name,JSON.stringify(this.data))},create:function(e){return e.id||(e.id=e.attributes.id=guid()),this.data[e.id]=e,this.save(),e},update:function(e){return this.data[e.id]=e,this.save(),e},find:function(e){return this.data[e.id]},findAll:function(){return _.values(this.data)},destroy:function(e){return delete this.data[e.id],this.save(),e}});const CustomUpload=function(e){var n=new XMLHttpRequest;e.onProgress&&n.upload&&(n.upload.onprogress=function(n){n.total>0&&(n.percent=n.loaded/n.total*100),e.onProgress(n)});var t=new FormData;e.data&&Object.keys(e.data).map(function(n){t.append(n,e.data[n])}),t.append(e.filename,e.file),n.onerror=function(n){e.onError(n)},n.onload=function(){if(n.status<200||n.status>=300)return e.onError(getError(e,n),getBody(n));e.onSuccess(getBody(n))};var o="jwfile=";o=o+encodeURIComponent(e.file.name)+"&app_id=undefined&app_type=jw_app_as";var i=e.action+(-1==e.action.indexOf("?")?"?":"&")+o;n.open("POST",i,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var r=e.headers||{};null!==r["X-Requested-With"]&&n.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var a in r)r.hasOwnProperty(a)&&null!==r[a]&&n.setRequestHeader(a,r[a]);return n.send(e.file),{abort:function(){n.abort()}}};var jschars=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];window.jwInputProcess=function(){var e=$("#root");console.log("xxx2",e.length),e.on("focusin focusout",function(n){console.log("xxx",n.type,n),"focusin"===n.type&&$(n.target).is("input, textarea")?e.addClass("jw-ui-fixed-hidden"):e.removeClass("jw-ui-fixed-hidden")})},window.getNowDate=function(e){if(e)var n=new Date(e);else var n=new Date;return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()/1e3},window.upload={name:"file",action:"/upload/file/upload",headers:{},withCredentials:!0,showUploadList:!1,customRequest:function(e){function n(e,n){var t="cannot post "+e.action+" "+n.status+"'",o=new Error(t);return o.status=n.status,o.method="post",o.url=e.action,o}function t(e){var n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch(e){return n}}var o=new XMLHttpRequest;e.onProgress&&o.upload&&(o.upload.onprogress=function(n){n.total>0&&(n.percent=n.loaded/n.total*100),e.onProgress(n)});var i=new FormData;e.data&&Object.keys(e.data).map(function(n){i.append(n,e.data[n])}),i.append(e.filename,e.file),o.onerror=function(n){e.onError(n)},o.onload=function(){if(o.status<200||o.status>=300)return e.onError(n(e,o),t(o));e.onSuccess(t(o))};var r="jwfile=";r=r+encodeURIComponent(e.file.name)+"&app_id=undefined&app_type=jw_app_as";var a=e.action+(-1==e.action.indexOf("?")?"?":"&")+r;o.open("POST",a,!0),e.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);var s=e.headers||{};null!==s["X-Requested-With"]&&o.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var c in s)s.hasOwnProperty(c)&&null!==s[c]&&o.setRequestHeader(c,s[c]);return console.log("xxxx"),o.send(e.file),{abort:function(){o.abort()}}},onStart:function(e){message.loading("正在上传："+e.name)},onSuccess:function(e){message.destroy()}},window.confirm=function(e){var n=document.createElement("IFRAME");n.style.display="none",n.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(n);var t=window.frames[0],o=t.window.confirm(e);return n.parentNode.removeChild(n),o},function(e,n){"use strict";var t={};e.PubSub=t,function(e){function n(e){var n;for(n in e)if(e.hasOwnProperty(n))return!0;return!1}function t(e){return function(){throw e}}function o(e,n,o){try{e(n,o)}catch(e){setTimeout(t(e),0)}}function i(e,n,t){e(n,t)}function r(e,n,t,r){var a,s=u[n],c=r?i:o;if(u.hasOwnProperty(n))for(a in s)s.hasOwnProperty(a)&&c(s[a],e,t)}function a(e,n,t){return function(){var o=String(e),i=o.lastIndexOf(".");for(r(e,e,n,t);-1!==i;)o=o.substr(0,i),i=o.lastIndexOf("."),r(e,o,n,t)}}function s(e){for(var t=String(e),o=Boolean(u.hasOwnProperty(t)&&n(u[t])),i=t.lastIndexOf(".");!o&&-1!==i;)t=t.substr(0,i),i=t.lastIndexOf("."),o=Boolean(u.hasOwnProperty(t)&&n(u[t]));return o}function c(e,n,t,o){var i=a(e,n,o);return!!s(e)&&(!0===t?i():setTimeout(i,0),!0)}var u={},d=-1;e.publish=function(n,t){return c(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return c(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!=typeof n)return!1;u.hasOwnProperty(e)||(u[e]={});var t="uid_"+String(++d);return u[e][t]=n,t},e.clearAllSubscriptions=function(){u={}},e.clearSubscriptions=function(e){var n;for(n in u)u.hasOwnProperty(n)&&0===n.indexOf(e)&&delete u[n]},e.unsubscribe=function(n){var t,o,i,r="string"==typeof n&&(u.hasOwnProperty(n)||function(e){var n;for(n in u)if(u.hasOwnProperty(n)&&0===n.indexOf(e))return!0;return!1}(n)),a=!r&&"string"==typeof n,s="function"==typeof n,c=!1;if(r)return void e.clearSubscriptions(n);for(t in u)if(u.hasOwnProperty(t)){if(o=u[t],a&&o[n]){delete o[n],c=n;break}if(s)for(i in o)o.hasOwnProperty(i)&&o[i]===n&&(delete o[i],c=!0)}return c}}(t),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this),function(e,n){"undefined"!=typeof module&&"object"==typeof exports?module.exports=n(e):"function"==typeof define&&(define.amd||define.cmd)?define([],function(t){return e.jw=n(e)}):e.jw=n(e)}(this,function(e){function n(n,t,r){/iPhone|iPad|iPod/i.test(a)?s?s.callHandler(n,i(t),function(e){d.callback(n,e,r)}):o(n,r):e.JoywokMobileApp?JoywokMobileApp.callHandler(n,i(t),function(e){d.callback(n,e,r)}):o(n,r)}function t(e,n,t){console.log(typeof n,n),"string"==typeof n&&(n=JSON.parse(n));var o,i;switch(delete n.err_code,delete n.err_desc,delete n.err_detail,o=n.errMsg,t=t||{},t._complete&&(t._complete(n),delete t._complete),o=n.errMsg||"",d.config.debug&&!t.isInnerInvoke&&alert(JSON.stringify(n)),i=o.indexOf(":"),o.substring(i+1)){case"ok":t.success&&t.success(n);break;case"cancel":t.cancel&&t.cancel(n);break;default:t.fail&&t.fail(n)}t.complete&&t.complete(n)}function o(e,n){if(console.log("innerInvoke",e,n,d.config),!(!d.config.debug||n&&n.isInnerInvoke)){var t=u[e];t&&(e=t),n&&n._complete&&delete n._complete,console.log('"'+e+'",',n||"")}}function i(e){return e=e||{},e.appId=r.appid,e.verifyAppId=r.appid,e.verifySignType="sha1",e.verifyTimestamp=r.timestamp+"",e.verifyNonceStr=r.nonceStr,e.verifySignature=r.signature,e.verifyCorpid=r.corpid,r.code&&0!=r.code.length&&(e.code=r.code),e}var r=defaultParams={debug:!1,appid:"",timestamp:0,nonceStr:"",signature:"",jsApiList:[],corpid:"",code:""},a=navigator.userAgent;"string"==typeof window.ide&&(a=window.ide);var s,c,u;c={config:"config",setTitle:"setTitle",onMenuShareTimeline:"menu:share:timeline",onMenuShareWechat:"menu:share:wechat"},u=function(){var e,n={};for(e in c)n[c[e]]=e;return n}();var d=d||{callback:t,connectJoywokMobileApp:function(e){window.JoywokMobileApp?e(JoywokMobileApp):document.addEventListener("JoywokMobileAppReady",function(){e(JoywokMobileApp)},!1)},config:function(e){var n=defaultParams;for(var t in e)n[t]=e[t];r=d.configs=n;var o=this;/iPhone|iPad|iPod/i.test(a)?function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)},0)}(function(e){s=e,"string"==typeof ide?s.init(function(){d.ready&&d.ready(),o.listen(e)}):(d.ready&&d.ready(),o.listen(e))}):d.connectJoywokMobileApp(function(e){e.init(function(n,t){console.log("asdasdas");var i={"Javascript Responds":"测试中文!"};d.ready&&d.ready(i),s=e,o.listen(e),t(i)})})},listen:function(e){e.registerHandler("onFilter",function(e,n){"function"==typeof window.onFilter&&window.onFilter(e)}),e.registerHandler("onSelectTab",function(e,n){"function"==typeof window.onJwSelectTab&&window.onJwSelectTab(e)}),e.registerHandler("onShowAppMore",function(e,n){"function"==typeof window.onShowAppMore&&window.onShowAppMore(e)}),e.registerHandler("onNavBtnClick",function(e,n){"function"==typeof window.onJwNavBtnClick&&window.onJwNavBtnClick(JSON.parse(e))}),e.registerHandler("subShareData",function(e,n){"function"==typeof window.subShareData&&window.subShareData(e)}),e.registerHandler("onVoiceRecordEnd",function(e,n){"function"==typeof window.onJWVoiceRecordEnd&&window.onJWVoiceRecordEnd(e)})},setTitle:function(e){n("setTitle",{title:e.title},e)},setHeaderLine:function(e){n("setHeaderLine",e)},checkJsApi:function(e){n("checkJsApi",{jsApiList:e.jsApiList},e)},getInfo:function(e){n("getInfo",{},e)},pushWebView:function(e){n("pushWebView",{url:e},e)},newWebView:function(e){n("newWebView",{url:e},e)},closeWebView:function(e){n("closeWebView",{},e)},setFuncBtns:function(e){n("setFuncBtns",{buttons:e},e)},setFuncBtnStatus:function(e){n("setFuncBtnStatus",e,e)},showTabs:function(e){var t={tabs:e.tabs,selector:e.selector,style:e.style};e.position&&(t.position=e.position),void 0!==e.focusidx&&(t.focusidx=e.focusidx),n("showTabs",t,e)},chooseTab:function(e){n("chooseTab",e,e)},hideTabs:function(e){n("hideTabs",{},e)},mailto:function(e){n("mailto",{email:e.email},e)},back:function(e){n("back",{},e)},onSelectTab:function(e){"function"==typeof window.onJwSelectTab&&window.onJwSelectTab(data)},onNavBtnClick:function(e){"function"==typeof window.onJwNavBtnClick&&window.onJwNavBtnClick(e)},getAuthCode:function(e,t){n("AuthCode",e,t)},onAuthCode:function(e){"function"==typeof window.onJwAuthCode&&window.onJwAuthCode(e)},getLocation:function(e,t){n("getLocation",e,t)},openLocation:function(e){n("openLocation",e)},previewImages:function(e){n("previewImages",e)},choseFile:function(e,t){n("choseFile",e,t)},uploadFile:function(e,t){n("uploadFile",e,t)},downloadFile:function(e,t){n("downloadFile",e,t)},scanQRCode:function(e,t){n("scanQRCode",e,t)},previewDoc:function(e,t){n("previewDoc",e,t)},setBarBg:function(e){n("setBarBg",e)},chartInit:function(e,t){n("chartInit",e,t)},chartSingle:function(e,t){n("chartSingle",e,t)},openImages:function(e){n("OpenImages",{},e)},shareData:function(e){n("shareData",e)},getUsers:function(e,t){n("getUsers",e,t)},sipMakeCall:function(e,t){n("sipMakeCall",e,t)},ocr:function(e,t){n("ocr",e,t)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},chooseUsers:function(e,t){n("chooseUsers",e,t)}};return d});